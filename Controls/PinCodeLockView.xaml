<?xml version="1.0" encoding="utf-8" ?>
<ContentView x:Class="MauiLocalAuth.Controls.PinCodeLockView"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:controls="clr-namespace:MauiLocalAuth.Controls"
             xmlns:converters="clr-namespace:MauiLocalAuth.Converters"
             x:Name="Root"
             x:DataType="controls:PinCodeLockView">

	<ContentView.Resources>
		<ResourceDictionary>
			<converters:PinCircleFillConverter x:Key="pinCircleFillConverter" />
		</ResourceDictionary>

		<Style TargetType="Ellipse">
			<Setter Property="HorizontalOptions" Value="Center" />
			<Setter Property="VerticalOptions" Value="Center" />
			<Setter Property="Fill" Value="Transparent" />
			<Setter Property="StrokeThickness" Value="2" />
			<Setter Property="Stroke" Value="SlateGray" />
			<Setter Property="HeightRequest" Value="12" />
			<Setter Property="WidthRequest" Value="12" />
			<Setter Property="Margin" Value="4" />
		</Style>

		<Style TargetType="Button">
			<Setter Property="WidthRequest" Value="72" />
			<Setter Property="HeightRequest" Value="72" />
			<Setter Property="CornerRadius" Value="8" />
			<Setter Property="FontSize" Value="24" />
			<Setter Property="TextColor" Value="DarkSlateGray" />
			<Setter Property="BackgroundColor" Value="Transparent" />
			<Setter Property="VisualStateManager.VisualStateGroups">
				<VisualStateGroupList>
					<VisualStateGroup Name="CommonStates">

						<VisualState Name="Normal">
							<VisualState.Setters>
								<Setter Property="BackgroundColor" Value="Transparent" />
							</VisualState.Setters>
						</VisualState>

						<VisualState Name="Pressed">
							<VisualState.Setters>
								<Setter Property="BackgroundColor" Value="#22000000" />
								<Setter Property="Shadow">
									<Shadow Brush="Black"
									        Opacity="0.3"
									        Radius="6"
									        Offset="2,2" />
								</Setter>
							</VisualState.Setters>
						</VisualState>

					</VisualStateGroup>
				</VisualStateGroupList>
			</Setter>
		</Style>
	</ContentView.Resources>

	<VerticalStackLayout Padding="8"
	                     HorizontalOptions="Center"
	                     Spacing="12"
	                     VerticalOptions="Center">

		<!--  Строка визуализации ПИН-кода  -->
		<Border BackgroundColor="Transparent"
		        HorizontalOptions="Center"
		        Stroke="Gray"
		        StrokeShape="RoundRectangle 12"
		        StrokeThickness="2"
		        VerticalOptions="Center">

			<Grid ColumnDefinitions="Auto, Auto, Auto, Auto"
			      ColumnSpacing="12"
			      HorizontalOptions="Center"
			      VerticalOptions="Center">
				<Ellipse Grid.Column="0"
				         Fill="{Binding Source={x:Reference Root}, Path=PinCode, Converter={StaticResource pinCircleFillConverter}, ConverterParameter=1}" />
				<Ellipse Grid.Column="1"
				         Fill="{Binding Source={x:Reference Root}, Path=PinCode, Converter={StaticResource pinCircleFillConverter}, ConverterParameter=2}" />
				<Ellipse Grid.Column="2"
				         Fill="{Binding Source={x:Reference Root}, Path=PinCode, Converter={StaticResource pinCircleFillConverter}, ConverterParameter=3}" />
				<Ellipse Grid.Column="3"
				         Fill="{Binding Source={x:Reference Root}, Path=PinCode, Converter={StaticResource pinCircleFillConverter}, ConverterParameter=4}" />
			</Grid>
		</Border>

		<!--  Кнопки  -->
		<Grid ColumnDefinitions="Auto, Auto, Auto"
		      ColumnSpacing="8"
		      RowDefinitions="Auto, Auto, Auto, Auto"
		      RowSpacing="8">

			<!--  Row 0  -->
			<Button Grid.Row="0"
			        Grid.Column="0"
			        Command="{Binding Source={x:Reference Root}, Path=AddDigitCommand}"
			        CommandParameter="1"
			        Text="1" />
			<Button Grid.Row="0"
			        Grid.Column="1"
			        Command="{Binding Source={x:Reference Root}, Path=AddDigitCommand}"
			        CommandParameter="2"
			        Text="2" />
			<Button Grid.Row="0"
			        Grid.Column="2"
			        Command="{Binding Source={x:Reference Root}, Path=AddDigitCommand}"
			        CommandParameter="3"
			        Text="3" />

			<!--  Row 1  -->
			<Button Grid.Row="1"
			        Grid.Column="0"
			        Command="{Binding Source={x:Reference Root}, Path=AddDigitCommand}"
			        CommandParameter="4"
			        Text="4" />
			<Button Grid.Row="1"
			        Grid.Column="1"
			        Command="{Binding Source={x:Reference Root}, Path=AddDigitCommand}"
			        CommandParameter="5"
			        Text="5" />
			<Button Grid.Row="1"
			        Grid.Column="2"
			        Command="{Binding Source={x:Reference Root}, Path=AddDigitCommand}"
			        CommandParameter="6"
			        Text="6" />

			<!--  Row 2  -->
			<Button Grid.Row="2"
			        Grid.Column="0"
			        Command="{Binding Source={x:Reference Root}, Path=AddDigitCommand}"
			        CommandParameter="7"
			        Text="7" />
			<Button Grid.Row="2"
			        Grid.Column="1"
			        Command="{Binding Source={x:Reference Root}, Path=AddDigitCommand}"
			        CommandParameter="8"
			        Text="8" />
			<Button Grid.Row="2"
			        Grid.Column="2"
			        Command="{Binding Source={x:Reference Root}, Path=AddDigitCommand}"
			        CommandParameter="9"
			        Text="9" />

			<!--  Row 3  -->
			<Button Grid.Row="3"
			        Grid.Column="0"
			        Command="{Binding Source={x:Reference Root}, Path=RemoveDigitCommand}"
			        Text="⌫" />
			<Button Grid.Row="3"
			        Grid.Column="1"
			        Command="{Binding Source={x:Reference Root}, Path=AddDigitCommand}"
			        CommandParameter="0"
			        Text="0" />
		</Grid>
	</VerticalStackLayout>
</ContentView>
